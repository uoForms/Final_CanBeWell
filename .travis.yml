language: node_js
node_js:
- 11
before_install:
- curl --compressed -o- -L https://yarnpkg.com/install.sh | bash
- export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"
- yarn global add firebase-tools
- rm -r ./src/JSONFolder
- mkdir ./src/JSONFolder
- curl -L -o ./src/JSONFolder/HtmlTopic-EN.json "https://drive.google.com/uc?export=download&id=1AiD5PFUWIslrR3l7fcnJTkubTen4ahLG"
- curl -L -o ./src/JSONFolder/HtmlTopic-FR.json "https://drive.google.com/uc?export=download&id=1XUnoeG-4wpCupuklp5TwzfFnVpVXpia0"
- curl -L -o ./src/JSONFolder/HtmlTest-FR.json "https://drive.google.com/uc?export=download&id=1IxoZKvlw286aPchmfWpk26x1mMnQme0Y"
- curl -L -o ./src/JSONFolder/HtmlTest-EN.json "https://drive.google.com/uc?export=download&id=1N6LrThVQs6PjG_QkowvNYJV1ENX6Wgs8"

install:
- yarn install
- CI=false yarn build
cache:
  directories:
  - node_modules
deploy:
  skip_cleanup: true
  provider: script
  script: bash scripts/deploy.sh
  on:
    branch: 
    - transgender
    # - transgender-test
    # This part controls which branch will be delpoyed automatically, so here it will only deploy analytics-test, 
    # if you want to deploy any other, added accordingly
